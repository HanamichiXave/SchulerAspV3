@{
    ViewBag.Title = "Enrollment";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<br><br><br>
<div class="panel panel-default">
	<div class="panel-body">
		<div class="row" style="margin: auto 15px;">
			<div class="col-md-3">
				<img class="img-responsive" src="https://www.timeshighereducation.com/sites/default/files/byline_photos/default-avatar.png">
				<div class="panel">
					<p class="panel-body">
						<span class="pull-right">000000</span>
						<span><b>Student Number: </b></span>&emsp;
					</p>
				</div>
			</div>
			<div class="col-md-9">
				<div class="well row">
					<div class="col-md-4">
						<h4>LASTNAME</h4><p>sample</p>
					</div>
					<div class="col-md-4">
						<h4>FIRST NAME</h4><p>sample</p>
					</div>
					<div class="col-md-4">
						<h4>MIDDLE NAME</h4><p>sample</p>
					</div>
				</div>
				<div class="well row">
					<div class="col-md-6">
						<h4>Grade</h4><p>sample</p>
					</div>
					<div class="col-md-6">
						<h4>School Year</h4><p>sample</p>
					</div>
				</div>
			</div>
			
		</div>
		<div class="well row" style="margin: auto 15px;">
			<div class="col-md-4">
				<label for="sel1">Payment Method:</label>
				<select class="form-control" id="sel1">
					<option>Full Payment</option>
					<option>Installment</option>
				</select><br>
				<table id="computation-list" class="table table-striped table-bordered">
					<thead>
						<tr class="bg-primary">
							<th>Item</th>
							<th>Price</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>Tuition</td>
							<td id="tf">Php 10,000.00</td>
						</tr>
						<tr>
							<td>Laboratory</td>
							<td>Php 1,050.00</td>
						</tr>
						<tr>
							<td>Misc</td>
							<td>Php 1,000.00</td>
						</tr>
						<tr>
							<td>Previous Balance</td>
							<td>Php 2,000.00</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="col-md-8">
				<div class="panel panel-default">
					<div class="panel-body">
						<h3><span id="fee" class="pull-right">PHP 0</span>TOTAL FEE:</h3>
					</div>
				</div>
				<div class="well" style="background-color: #fff">
					<p><span id="dp" class="pull-right">PHP 0</span>Down payment:</p>
					<p><span class="pull-right qtr">PHP 0</span>Quarter I:</p>
					<p><span class="pull-right qtr">PHP 0</span>Quarter II:</p>
					<p><span class="pull-right qtr">PHP 0</span>Quarter III:</p>
					<p><span class="pull-right qtr">PHP 0</span>Quarter IV:</p>
				</div>
			</div>
		</div>
	</div>
	<div class="panel-footer">
		<div class="row" style="margin: auto 15px;">
			<input class="btn btn-success pull-right" type="submit" name="submit" value="submit">
		</div>
	</div>
</div>

<script type="text/javascript">
	$(document).ready(function(){
		function cur_to_float(text){
			text = text.toUpperCase();
			text = text.replace('PHP', "");
			text = text.replace(',', "");
			return text;
		}
		function number_to_currency(number, options) {
			  try {
		    var options   = options || {};
		    var precision = options["precision"] || 2;
		    var unit      = options["unit"] || "$";
		    var separator = precision > 0 ? options["separator"] || "." : "";
		    var delimiter = options["delimiter"] || ",";
		  
		    var parts = parseFloat(number).toFixed(precision).split('.');
		    return unit + number_with_delimiter(parts[0], delimiter) + separator + parts[1].toString();
		  } catch(e) {
		    return number;
		  }
		}
		total_fee();
		var fee = $('#fee').text();
		$('#dp').text(fee);

		$('select').on('change', function() {
		  var payment_method = this.value;
		  if(payment_method == 'Full Payment'){
		  	$('#tf').text('PHP 10,000.00');
		  	$('#dp').text(fee);
		  	$('.qtr').text("PHP 0");
			total_fee();
		  }
		  else{
		  	$('#tf').text('PHP 12,000.00');
			total_fee();
		  	var f = cur_to_float($('#fee').text()), dp_text, q;
		  	dp = f * 0.20;
		  	dp_text = 'PHP ' + dp.toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,")
		  	$('#dp').text(number_to_currency(dp_text));
		  	q = (f - dp) / 4;
		  	$('.qtr').text(number_to_currency('PHP ' + q.toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,")));
		  }
		})
		function total_fee(){
			var x=[], z, a=0, b, value;
			$('#computation-list tr td:nth-child(2)').each(function(){
				var y =  cur_to_float($(this).html());
				x.push(y);
			});
			z = x.length;
			for(var i = 0; i < z; i++){
				b = parseFloat(x[i])
				a += b;
			}
			console.log(a);
			
			value = a;
			var num = 'PHP ' + value.toFixed(2).replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,");
			$("#fee").text(number_to_currency(num));
		}
	});
</script>